"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[984],{29595:function(ue,D,e){e.r(D),e.d(D,{default:function(){return le}});var M=e(15009),T=e.n(M),O=e(99289),W=e.n(O),$=e(97857),G=e.n($),H=e(5574),I=e.n(H),N=e(51042),Y=e(11774),J=e(97245),K=e(37476),Z=e(31199),Q=e(5966),s=e(1413),R=e(91),A=e(22270),d=e(67294),L=e(66758),b=e(19323),a=e(85893),U=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],X=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],w=function(t,v){var f=t.fieldProps,u=t.children,h=t.params,F=t.proFieldProps,n=t.mode,i=t.valueEnum,P=t.request,m=t.showSearch,x=t.options,p=(0,R.Z)(t,U),E=(0,d.useContext)(L.Z);return(0,a.jsx)(b.Z,(0,s.Z)((0,s.Z)({valueEnum:(0,A.h)(i),request:P,params:h,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,s.Z)({options:x,mode:n,showSearch:m,getPopupContainer:E.getPopupContainer},f),ref:v,proFieldProps:F},p),{},{children:u}))},q=d.forwardRef(function(l,t){var v=l.fieldProps,f=l.children,u=l.params,h=l.proFieldProps,F=l.mode,n=l.valueEnum,i=l.request,P=l.options,m=(0,R.Z)(l,X),x=(0,s.Z)({options:P,mode:F||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},v),p=(0,d.useContext)(L.Z);return(0,a.jsx)(b.Z,(0,s.Z)((0,s.Z)({valueEnum:(0,A.h)(n),request:i,params:u,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,s.Z)({getPopupContainer:p.getPopupContainer},x),ref:t,proFieldProps:h},m),{},{children:f}))}),k=d.forwardRef(w),_=q,j=k;j.SearchSelect=_,j.displayName="ProFormComponent";var V=j,ee=e(1414),ae=e(15867),te=e(45360),z=e(48457),re=function(){var t=(0,d.useState)(!1),v=I()(t,2),f=v[0],u=v[1],h=ee.Z.useForm(),F=I()(h,1),n=F[0],i=(0,d.useRef)(),P=(0,d.useState)(!1),m=I()(P,2),x=m[0],p=m[1],E=[{title:"ID\u6807\u8BC6",dataIndex:"Type"},{title:"\u5F53\u524D\u9012\u589E\u503C",dataIndex:"CurrentId",search:!1},{title:"\u524D\u7F00",dataIndex:"Prefix",search:!1},{title:"\u540E\u7F00",dataIndex:"Suffix",search:!1},{title:"\u56FA\u5B9A\u957F\u5EA6",dataIndex:"FixedLength",search:!1},{title:"\u64CD\u4F5C",search:!1,render:function(c){return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("a",{onClick:function(){u(!0);var r=G()({},c);r.Prefix=r.Prefix.split(",").filter(function(C){return C!==""}),r.Suffix=r.Suffix.split(",").filter(function(C){return C!==""}),n.setFieldsValue(r)},children:"\u7F16\u8F91"})})}}],ne=function(){return[(0,a.jsx)(ae.ZP,{type:"primary",icon:(0,a.jsx)(N.Z,{}),onClick:function(){n.resetFields(),n.setFieldsValue({CurrentId:0,FixedLength:0}),u(!0)},children:"\u6DFB\u52A0"},"add")]},oe=function(){var g=W()(T()().mark(function c(o){var r;return T()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return r={data:[],success:!0,total:0},o.Page=o.current||1,o.PageSize=o.pageSize||10,S.next=5,(0,z.P3)("/api/getIdRuleList",o).then(function(y){r.success=y.code===200,r.data=y.data.List||[],r.data=r.data.map(function(B){return B.key=B.Id,B}),r.total=y.data.Total||0});case 5:return S.abrupt("return",Promise.resolve(r));case 6:case"end":return S.stop()}},c)}));return function(o){return g.apply(this,arguments)}}();return(0,a.jsxs)(Y._z,{style:{minHeight:window.innerHeight-150},children:[(0,a.jsx)(J.Z,{columns:E,search:{labelWidth:120},request:oe,toolBarRender:ne,actionRef:i}),(0,a.jsxs)(K.Y,{width:500,title:n.getFieldValue("Id")>0?"\u7F16\u8F91ID\u89C4\u5219":"\u65B0\u589EID\u89C4\u5219",open:f,form:n,loading:x,modalProps:{onCancel:function(){return u(!1)}},onFinish:function(c){p(!0),(0,z.dv)("/api/saveIdRule",c).then(function(o){o.code===200&&(te.ZP.success(o.message),u(!1),n.resetFields(),i.current&&i.current.reload()),p(!1)})},children:[(0,a.jsx)(Z.Z,{name:"Id",hidden:!0}),(0,a.jsx)(Q.Z,{rules:[{required:!0,message:"\u8BF7\u8F93\u5165"}],name:"Type",label:"ID\u6807\u8BC6",placeholder:"\u8BF7\u8F93\u5165"}),(0,a.jsx)(Z.Z,{rules:[{type:"number",min:0}],name:"CurrentId",label:"\u5F53\u524D\u9012\u589E\u503C",placeholder:"\u8BF7\u8F93\u5165",tooltip:"ID\u9012\u589E\u7684\u8D77\u59CB\u503C"}),(0,a.jsx)(V,{name:"Prefix",mode:"tags",label:"\u524D\u7F00",placeholder:"\u8BF7\u8F93\u5165",options:[{value:"\u5E74",label:"\u5E74"},{value:"\u6708",label:"\u6708"},{value:"\u65E5",label:"\u65E5"},{value:"\u65F6",label:"\u65F6"},{value:"\u5206",label:"\u5206"},{value:"\u79D2",label:"\u79D2"}]}),(0,a.jsx)(V,{name:"Suffix",mode:"tags",label:"\u540E\u7F00",placeholder:"\u8BF7\u8F93\u5165",options:[{value:"\u5E74",label:"\u5E74"},{value:"\u6708",label:"\u6708"},{value:"\u65E5",label:"\u65E5"},{value:"\u65F6",label:"\u65F6"},{value:"\u5206",label:"\u5206"},{value:"\u79D2",label:"\u79D2"}]}),(0,a.jsx)(Z.Z,{rules:[{type:"number",min:0}],name:"FixedLength",label:"\u56FA\u5B9A\u957F\u5EA6",placeholder:"\u8BF7\u8F93\u5165",tooltip:"\u8BBE\u4E3A0\u65F6\u4E3A\u4E0D\u9650\u5236\u751F\u6210\u7684ID\u7684\u957F\u5EA6"})]})]})},le=re}}]);
