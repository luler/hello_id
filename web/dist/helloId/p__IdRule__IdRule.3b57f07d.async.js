"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[984],{29595:function(pe,R,e){e.r(R),e.d(R,{default:function(){return de}});var H=e(15009),A=e.n(H),N=e(99289),Y=e.n(N),J=e(97857),Z=e.n(J),K=e(5574),j=e.n(K),Q=e(51042),U=e(11774),X=e(97245),w=e(37476),y=e(31199),k=e(5966),v=e(1413),L=e(91),M=e(22270),d=e(67294),$=e(66758),b=e(19323),t=e(85893),q=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],_=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],ee=function(n,f){var h=n.fieldProps,c=n.children,F=n.params,m=n.proFieldProps,x=n.mode,p=n.valueEnum,P=n.request,C=n.showSearch,s=n.options,i=(0,L.Z)(n,q),T=(0,d.useContext)($.Z);return(0,t.jsx)(b.Z,(0,v.Z)((0,v.Z)({valueEnum:(0,M.h)(p),request:P,params:F,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,v.Z)({options:s,mode:x,showSearch:C,getPopupContainer:T.getPopupContainer},h),ref:f,proFieldProps:m},i),{},{children:c}))},te=d.forwardRef(function(o,n){var f=o.fieldProps,h=o.children,c=o.params,F=o.proFieldProps,m=o.mode,x=o.valueEnum,p=o.request,P=o.options,C=(0,L.Z)(o,_),s=(0,v.Z)({options:P,mode:m||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},f),i=(0,d.useContext)($.Z);return(0,t.jsx)(b.Z,(0,v.Z)((0,v.Z)({valueEnum:(0,M.h)(x),request:p,params:c,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,v.Z)({getPopupContainer:i.getPopupContainer},s),ref:n,proFieldProps:F},C),{},{children:h}))}),ae=d.forwardRef(ee),ne=te,E=ae;E.SearchSelect=ne,E.displayName="ProFormComponent";var V=E,ue=e(40741),le=e(5914),oe=e(12096),z=e(96074),re=e(86738),O=e(45360),se=e(15867),I=e(48457),ie=function(){var n=(0,d.useState)(!1),f=j()(n,2),h=f[0],c=f[1],F=(0,d.useState)("\u65B0\u589EID\u89C4\u5219"),m=j()(F,2),x=m[0],p=m[1],P=ue.Z.useForm(),C=j()(P,1),s=C[0],i=(0,d.useRef)(),T=(0,d.useState)(!1),W=j()(T,2),ce=W[0],G=W[1],ve=[{title:"ID\u6807\u8BC6",dataIndex:"Type"},{title:"\u5F53\u524D\u9012\u589E\u503C",dataIndex:"CurrentId",search:!1},{title:"\u524D\u7F00",dataIndex:"Prefix",search:!1},{title:"\u540E\u7F00",dataIndex:"Suffix",search:!1},{title:"\u9012\u589E\u503C\u6700\u5C0F\u957F\u5EA6",dataIndex:"MinLength",search:!1},{title:"\u64CD\u4F5C",search:!1,render:function(l){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("a",{onClick:function(){(0,I.P3)("/api/createId",{Type:l.Type}).then(function(a){a.code===200&&(le.Z.info({closable:!0,icon:null,footer:null,title:'\u6807\u8BC6"'+l.Type+'"\u6210\u529F\u751F\u6210\u5982\u4E0BID',content:(0,t.jsx)("div",{style:{paddingBottom:20,paddingTop:10},children:(0,t.jsx)(oe.Z,{value:a.data[0],disabled:!0})})}),setTimeout(function(){i.current.reload()},1500))})},children:"\u751F\u6210"}),(0,t.jsx)(z.Z,{type:"vertical"}),(0,t.jsx)("a",{onClick:function(){p("\u7F16\u8F91ID\u89C4\u5219"),c(!0);var a=Z()({},l);a.Prefix=a.Prefix.split(",").filter(function(r){return r!==""}),a.Suffix=a.Suffix.split(",").filter(function(r){return r!==""}),s.setFieldsValue(a)},children:"\u7F16\u8F91"}),(0,t.jsx)(z.Z,{type:"vertical"}),(0,t.jsx)(re.Z,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",description:"\u5220\u9664\u540E\uFF0C\u6570\u636E\u5C06\u65E0\u6CD5\u6062\u590D\uFF0C\u8BF7\u614E\u91CD\uFF01",onConfirm:function(a){(0,I.dv)("/api/delIdRule",{Ids:[l.Id]}).then(function(r){r.code===200&&(O.ZP.success(r.message),i.current.reload())})},children:(0,t.jsx)("a",{style:{color:"red"},children:"\u5220\u9664"})})]})}}],fe=function(){return[(0,t.jsx)(se.ZP,{type:"primary",icon:(0,t.jsx)(Q.Z,{}),onClick:function(){s.resetFields(),s.setFieldsValue({CurrentId:0,MinLength:0}),p("\u65B0\u589EID\u89C4\u5219"),c(!0)},children:"\u6DFB\u52A0"},"add")]},me=function(){var g=Y()(A()().mark(function l(u){var a;return A()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return a={data:[],success:!0,total:0},u.Page=u.current||1,u.PageSize=u.pageSize||10,S.next=5,(0,I.P3)("/api/getIdRuleList",u).then(function(D){a.success=D.code===200,a.data=D.data.List||[],a.data=a.data.map(function(B){return B.key=B.Id,B}),a.total=D.data.Total||0});case 5:return S.abrupt("return",Promise.resolve(a));case 6:case"end":return S.stop()}},l)}));return function(u){return g.apply(this,arguments)}}();return(0,t.jsxs)(U._z,{style:{minHeight:window.innerHeight-150},children:[(0,t.jsx)(X.Z,{columns:ve,search:{labelWidth:120},request:me,toolBarRender:fe,actionRef:i}),(0,t.jsxs)(w.Y,{width:500,title:x,open:h,form:s,loading:ce,modalProps:{onCancel:function(){return c(!1)}},onFinish:function(l){var u,a;G(!0),(0,I.dv)("/api/saveIdRule",Z()(Z()({},l),{},{Prefix:(u=l.Prefix)===null||u===void 0?void 0:u.join(","),Suffix:(a=l.Suffix)===null||a===void 0?void 0:a.join(",")})).then(function(r){r.code===200&&(O.ZP.success(r.message),c(!1),s.resetFields(),i.current&&i.current.reload()),G(!1)})},children:[(0,t.jsx)(y.Z,{name:"Id",hidden:!0}),(0,t.jsx)(k.Z,{rules:[{required:!0,message:"\u8BF7\u8F93\u5165"}],name:"Type",label:"ID\u6807\u8BC6",placeholder:"\u8BF7\u8F93\u5165"}),(0,t.jsx)(y.Z,{rules:[{type:"number",min:0}],name:"CurrentId",label:"\u5F53\u524D\u9012\u589E\u503C",placeholder:"\u8BF7\u8F93\u5165",tooltip:"ID\u9012\u589E\u7684\u8D77\u59CB\u503C"}),(0,t.jsx)(V,{name:"Prefix",mode:"tags",label:"\u524D\u7F00",placeholder:"\u8BF7\u8F93\u5165",options:[{value:"\u5E74",label:"\u5E74"},{value:"\u6708",label:"\u6708"},{value:"\u65E5",label:"\u65E5"},{value:"\u65F6",label:"\u65F6"},{value:"\u5206",label:"\u5206"},{value:"\u79D2",label:"\u79D2"}]}),(0,t.jsx)(V,{name:"Suffix",mode:"tags",label:"\u540E\u7F00",placeholder:"\u8BF7\u8F93\u5165",options:[{value:"\u5E74",label:"\u5E74"},{value:"\u6708",label:"\u6708"},{value:"\u65E5",label:"\u65E5"},{value:"\u65F6",label:"\u65F6"},{value:"\u5206",label:"\u5206"},{value:"\u79D2",label:"\u79D2"}]}),(0,t.jsx)(y.Z,{rules:[{type:"number",min:0}],name:"MinLength",label:"\u9012\u589E\u503C\u6700\u5C0F\u957F\u5EA6",placeholder:"\u8BF7\u8F93\u5165",tooltip:"\u8BBE\u4E3A0\u65F6\u4E3A\u4E0D\u9650\u5236\u751F\u6210\u7684ID\u7684\u957F\u5EA6"})]})]})},de=ie}}]);
